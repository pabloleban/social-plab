<style>

    .mode-monthly .main{
        position: relative;
        width: 1080px;
        height: 1080px;
        overflow: hidden;
        display: flex;
        justify-content: center;
        zoom: 0.5;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
    }

    .mode-monthly .nice-border{
        position: absolute;
        z-index: 110;
        width: 100%;
        pointer-events: none;
    }
    
    .mode-monthly .mask1{
        clip-path: polygon(0 0, 0% 100%, 100% 0);
        position: absolute;
        width: 670px;
        height: 680px;
        top: 0;
        z-index: 10;
        left: 0;
    }

    .mode-monthly .mask3{
        clip-path: polygon(100% 0, 0 100%, 100% 100%);
        position: absolute;
        width: 690px;
        height: 700px;
        bottom: 0;
        right: 0;
        z-index: 10;
    }

    .mode-monthly .cover-text{
        line-height: 1.3em;
        text-align: left;
        color: #ffffff;
        height: 148px;
        top: 387px;
        font-size: 60px;
        width: 570px;
        z-index: 116;
        font-weight: 900;
        position: absolute;
        word-break: break-word;
    }

    .mode-monthly .cover-sub-text{
        line-height: 1.3em;
        text-align: right;
        color: #ffffff;
        height: 80px;
        top: 610px;
        right: 255px;
        font-size: 60px;
        width: 200px;
        z-index: 116;
        font-weight: 900;
        position: absolute;
        word-break: break-word;
    }

</style>

<div class="col-lg-12 col-xl-6 justify-content-center">
    <div class="row" id="button-thumbs">
        <div class="col-12">
            <div class="main mb-4" id="full-picture">
                <div class="text align-self-center"></div>
                <img src="assets/images/monthly.png" class="nice-border">
                <div class="mask1">
                    <span class="">
                        <img class="pic" id="bg-1">
                    </span>
                </div>
                <div class="mask2">
                    <span class="">
                        <img class="pic" id="bg-2">
                    </span>
                </div>
                <div class="mask3">
                    <span class="">
                        <img class="pic" id="bg-3">
                    </span>
                </div>
                <div class="cover-text"></div>
                <div class="cover-sub-text"></div>
            </div>
        </div>
        <div class="col-3 w-100 text-center my-2" id="cover-thumb"><button class="btn btn-secondary">Cover</button></div>
    </div>
</div>
<div class="col-lg-12 col-xl-6">
    <div id="accordion">
        <div class="card bg-dark text-white">
            <div class="card-header bg-primary clickable" id="temp" data-toggle="collapse" data-target="#temp-config" aria-expanded="true" aria-controls="temp-config">
                <h5 class="mb-0">
                    Cover Configuration
                </h5>
            </div>
            <div id="temp-config" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
                <div class="card-body">
                
                    <div class="form-group">
                        <label for="bg">Cover Main Text</label>
                        <input class="form-control" placeholder="Cover Main Text" id="cover-main-text" value="">
                    </div>
                    <div class="form-group">
                        <label for="text">Cover Sub Text</label>
                        <input class="form-control" placeholder="Cover Sub Text" id="cover-sub-text" value="">
                    </div>
                    <div class="form-group">
                        <label for="fontsize">Cover Background Image 1</label>
                        <input class="form-control img-url" placeholder="Cover Background Image 1" id="cover-bg-1" value="https://htmlcolorcodes.com/assets/images/html-color-codes-color-tutorials-903ea3cb.jpg">
                    </div>
                    <div class="form-group">
                        <label for="fontsize">Cover Background Image 2</label>
                        <input class="form-control img-url" placeholder="Cover Background Image 2" id="cover-bg-2" value="https://ak6.picdn.net/shutterstock/videos/1027713866/thumb/10.jpg">
                    </div>
                    <div class="form-group">
                        <label for="fontsize">Cover Background Image 3</label>
                        <input class="form-control img-url" placeholder="Cover Background Image 3" id="cover-bg-3" value="https://d3ansictanv2wj.cloudfront.net/bot-day-background-700x600-ce7fb2df41cfbf6c827cf229da02882a.jpg">
                    </div>
                    <div id="monthly-updates"></div>
                    <div class="form-group">
                        <button class="btn btn-primary" id="add-monthly"><i class="fas fa-plus pr-2"></i>Add monthly update</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="form-group mt-4">
        <label for="text">File name</label>
        <input class="form-control" placeholder="Nombre" id="filename" value="quicksave-news.png">
    </div>
    <button class="btn btn-primary" onclick="download()">Download</button>
</div>

<script>

let monthlyData = [];
let objectCounter = 0;
$(() => {
    const monthly = $("#mode-monthly")

    const applyChanges = () => {
        monthly.find(".cover-text").text(monthly.find("#cover-main-text").val());
        monthly.find(".cover-sub-text").text(monthly.find("#cover-sub-text").val());
    }

    const loadImage = (imgId, inputId) => {
        monthly.find(imgId).attr("src", $(inputId).val().trim());
        monthly.find(imgId).unbind("load")
        monthly.find(imgId).on("load", function(){
            const height = this.naturalHeight;
            const width = this.width;

            // normal.find(".pic").css({
            //     top: "90px",
            //     left: 0,
            //     right: 0,
            //     bottom: 0
            // })

            if(height > width){
                monthly.find(imgId).width("100%")
            } else {
                monthly.find(imgId).height("100%")
            }
        })
    }

    monthly.find("#cover-sub-text").val(new Date().getFullYear());
    monthly.find("#cover-main-text").val(`LO MÁS ESPERADO DE ${new Date().toLocaleString("es-es", {month: "long"}).toUpperCase()}`);

    loadImage("#bg-1", "#cover-bg-1");
    loadImage("#bg-2", "#cover-bg-2");
    loadImage("#bg-3", "#cover-bg-3");

    monthly.find("#bg-1, #bg-2, #bg-3").on("input", () => {
        loadImage()
    })

    monthly.find("input:not(.img-url)").on("input", () => { applyChanges() })

    monthly.find("#add-monthly").click(() => {
        Swal.fire({
            
        })

        objectCounter++

        monthlyData.push({
            id: objectCounter,
            name: "",
            date: "",
            platform: ""
        })

        monthly.find("#monthly-updates").append(`
            <div>
                <hr>
                <div class="form-group">
                    <label>Game name</label>
                    <input class="form-control" placeholder="Game name">
                </div>
                <div class="form-group">
                    <label>Release date</label>
                    <input class="form-control" placeholder="Release date">
                </div>
                <div class="form-group">    
                    <label>Platform</label>
                    <input class="form-control" placeholder="Platform">
                </div>
                <div class="form-group text-right">
                    <button class="btn btn-danger" id="remove-monthly-${objectCounter}" data-id="${objectCounter}"><i class="fa fa-times mr-2"></i>Remove</button>
                </div>
            </div>
        `)

        $("#button-thumbs").append(`
            <div class="col-3 w-100 text-center my-2">
                <button class="btn btn-secondary thumb" data-id="${objectCounter}">Post</button>
            </div>
        `)

        $(`#remove-monthly-${objectCounter}`).click(function() {
        })

        
    })

    applyChanges();
})

</script>